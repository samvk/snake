"use strict";$(document).ready(function(){function d(){$("#snake-container").empty(),$('<div class="snake head">').appendTo("#snake-container");var e=r.headTop()-t,a=r.headTop()-2*t;$('<div class="snake belly">').appendTo("#snake-container").css({top:e,left:r.headLeft}),$('<div class="snake belly">').appendTo("#snake-container").css({top:a,left:r.headLeft}),n=[],n.push([e,r.headLeft()]),n.push([a,r.headLeft()]),c.setNewHeadPos("down")}function u(){i(),c.init(),f(),p()}function h(){e=!1,$("#play-again__screen").fadeOut(150),$("#arrow__screen").fadeIn(150),s=0,$(".highscore").text(s),$(".bestscore").text(o),d(),function t(){u(),e||setTimeout(t,100)}()}var e=!1,t=parseInt($(".snake").css("width")),a=parseInt($("#game-box").css("width")),n=[],s=0,o=function(){for(var e="bestscore=",t=document.cookie.split(";"),a=0;a<t.length;a++){for(var n=t[a];" "===n.charAt(0);)n=n.substring(1);if(0===n.indexOf(e))return n.substring(e.length,n.length)}return 0}(),r=function(){function e(e,t){return function(){return parseInt($("."+e).last().css(t))}}return{headTop:e("head","top"),headLeft:e("head","left"),appleTop:e("apple","top"),appleLeft:e("apple","left"),tailTop:e("snake","top"),tailLeft:e("snake","left")}}(),i=function(){var e=$($(".belly").get().reverse());e.each(function(e,t){var a=$(t),n=a.prev();a.css({top:n.css("top"),left:n.css("left")});var s=n.data("direction");a.data("direction",s)})},c=function(){function s(){n.push([r.headTop(),r.headLeft()]),n.shift()}var e="down",a=void 0;return{setNewHeadPos:function(n){var s={up:{pos:"top",exp:"-="},down:{pos:"top",exp:"+="},left:{pos:"left",exp:"-="},right:{pos:"left",exp:"+="}};a=function(){e=n,$(".head").css(s[n].pos,s[n].exp+t)}},setDirection:function(e){switch(e=parseInt(e.which,10)||e){case"up":case 87:case 38:this.setNewHeadPos("up");break;case"down":case 83:case 40:this.setNewHeadPos("down");break;case"left":case 65:case 37:this.setNewHeadPos("left");break;case"right":case 68:case 39:this.setNewHeadPos("right")}},init:function(){s(),a(),$(".head").data("direction",e)}}}();$(document).keydown(function(e){c.setDirection(e)}),$(".arrow").click(function(){var e=$(this).data("direction");c.setDirection(e)});var f=function(){function e(){n.unshift([r.tailTop(),r.tailLeft()])}function o(){var a=$(".snake").last();a.after('<div class="snake belly"></div>');var n=$(".snake").last(),s=a.data("direction"),o=parseInt(a.css("top")),r=parseInt(a.css("left"));switch(s){case"up":n.css({top:o+t,left:r});break;case"down":n.css({top:o-t,left:r});break;case"left":n.css({top:o,left:r+t});break;case"right":n.css({top:o,left:r-t})}e()}function i(){function e(){return 10*Math.round(Math.floor(Math.random()*(a-t))/10)}var s=e(),o=e();$(".apple").css({top:s,left:o});for(var r=[s,o],c=0;c<n.length;c++)if(r.join()===n[c].join())return void i()}return function(){r.headTop()===r.appleTop()&&r.headLeft()===r.appleLeft()&&(i(),o(),s+=10,$(".highscore").text(s))}}(),p=function(){function i(e,t){var a=new Date;a.setTime(a.getTime()+31536e6);var n="expires="+a.toUTCString();document.cookie=e+"="+t+"; "+n}function c(t){s>o&&(o=s,i("bestscore",s)),$(".play-again__message").text(t),$("#play-again__screen").fadeIn(150),$("#arrow__screen").fadeOut(150),$(".play-again__button").focus(),e=!0}function f(){(r.headTop()<0||r.headLeft()<0||r.headTop()>a-t||r.headLeft()>a-t)&&c("Out of bounds!")}function p(){for(var e=[r.headTop(),r.headLeft()],t=0;t<n.length;t++)if(e.join()===n[t].join())return void c("Stop hitting yourself!")}return function(){f(),p()}}();h(),$(".play-again__button").click(function(){e&&h()})});